<!DOCTYPE html>
<head>
  <script src="jquery-3.4.1.min.js"></script>
</head>
<html>
  <script>
  var events = [["10/25", "Illenium", "Future Bass", "Academy", "https://www.facebook.com/ILLENIUM/"],
                ["10/26", "Eprom", "Experimental", "Shrine", "https://www.facebook.com/ILLENIUM/"],
                ["10/27", "Svdden Death", "Dubstep", "1720", "https://www.facebook.com/ILLENIUM/"],
                ["10/28", "Zomboy", "Dubstep", "Avalon", "https://www.facebook.com/ILLENIUM/"]];

  var yourEvents= [[]];

  function addList(date, artist, genre, venue, link) {
      var newli = document.createElement("li");
      var newTime = document.createElement("div");
      newTime.className = "time";

      var newH2 = document.createElement("h2");
      newH2.innerHTML = date;

      var newArtist = document.createElement("div");
      newArtist.className = "artist";
      newArtist.innerHTML = artist;

      var newGenre = document.createElement("div");
      newGenre.className = "genre";
      newGenre.innerHTML = genre;

      var newVenue = document.createElement("div");
      newVenue.className = "venue";
      newVenue.innerHTML = venue;

      var newDetail = document.createElement("button");
      newDetail.className = "details";
      newDetail.innerHTML = "View Details";
      newDetail.href = link;

      var newButton = document.createElement("button");
      newButton.className = "addevent";
      newButton.innerHTML = "Add to Your Events";
      newButton.onclick = function() { addEvent(newli, newButton, events); }

      var listR = document.getElementById('contentR');
      var listL = document.getElementById('contentL');
      listR.appendChild(newli);
      newli.appendChild(newTime);
      newTime.appendChild(newH2);
      newli.appendChild(newArtist);
      newli.appendChild(newGenre);
      newli.appendChild(newVenue);
      newli.appendChild(newDetail);
      newli.appendChild(newButton);



    }

    function addEvent(id, button) {
      var addID = id; //id of the event div
      var indexList = $(id).index(); //index of the event div
      for (var i = 0; i < 5; i++) {
          var swap = events[indexList][i];
          events[indexList][i] = events[events.length-1][i];
          events[events.length-1][i] = swap;
      }
      var moveEvent =  events.pop();
      yourEvents.push(moveEvent);
      var destination = document.getElementById('contentL'); //where we are sending it, aka Your Events
      destination.appendChild(addID); //send to Your events
      button.innerHTML = "Remove from Your Events"; //change button
      button.onclick = function() { removeEvent(addID, button); } //change button's function
      //remove from events[] and add to yourEvents[]
      createList();


    }

    function removeEvent(id, button) {
      var removeID = id;
      var indexList = $(id).index();

      var destination = document.getElementById('contentR');
      destination.appendChild(removeID);
      button.innerHTML = "Add to Your Events";
      button.onclick = function() { addEvent(removeID, button); }
      events.push(moveEvent);
      sortList(events);
    }

    function createList(list){
      for (var i = 0; i < list[0].length-1; i++) {
          addList(list[i][0], list[i][1], list[i][2], list[i][3], list[i][4]);
      }
    }

    function clearList(){
      document.getElementById("contentR").innerHTML = "";
    }

    function sortList(list, num, name){
      clearList();
      var sortItem = num;


      switch (sortItem) {
        case 0:
          list.sort(sortDate);
          break;
        case 1:
          list.sort(sortArtist);
          break;
        case 2:
          list.sort(sortGenre);
          break;
        case 3:
          list.sort(sortVenue);
          break;
        default:

      }
      createList(list);
    }

    function sortDate(a, b) {
      document.getElementById('date').style.backgroundColor = "#741796";
      document.getElementById('artist').style.backgroundColor = "#835694";
      document.getElementById('genre').style.backgroundColor = "#835694";
      document.getElementById('venue').style.backgroundColor = "#835694";
      if (a[0] === b[0]) {
        return 0;
      }
      else {
        return (a[0] < b[0]) ? -1 : 1;
      }
    }
    function sortArtist(a, b) {
      document.getElementById('date').style.backgroundColor = "#835694";
      document.getElementById('artist').style.backgroundColor = "#741796";
      document.getElementById('genre').style.backgroundColor = "#835694";
      document.getElementById('venue').style.backgroundColor = "#835694";
      if (a[1] === b[1]) {
        return 0;
      }
      else {
        return (a[1] < b[1]) ? -1 : 1;
      }
    }
    function sortGenre(a, b) {
      document.getElementById('date').style.backgroundColor = "#835694";
      document.getElementById('artist').style.backgroundColor = "#835694";
      document.getElementById('genre').style.backgroundColor = "#741796";
      document.getElementById('venue').style.backgroundColor = "#835694";
      if (a[2] === b[2]) {
        return 0;
      }
      else {
        return (a[2] < b[2]) ? -1 : 1;
      }
    }
    function sortVenue(a, b) {
      document.getElementById('date').style.backgroundColor = "#835694";
      document.getElementById('artist').style.backgroundColor = "#835694";
      document.getElementById('genre').style.backgroundColor = "#835694";
      document.getElementById('venue').style.backgroundColor = "#741796";
      if (a[3] === b[3]) {
        return 0;
      }
      else {
        return (a[3] < b[3]) ? -1 : 1;
      }
    }

    function searchList() {
      // Declare variables
      var input, filter, ul, li, a, i, txtValue;
      input = document.getElementById('inputSearch');
      filter = input.value.toUpperCase();
      ul = document.getElementById("contentR");
      li = ul.getElementsByTagName('li');

      div = li[0].getElementsByTagName("div")[0];
      data = div[1].textContent;
      document.getElementById('artist').innerHTML = "hello";

    }


  </script>
  <head>
      <title>Bay Area Events</title>
      <link rel="stylesheet" type="text/css" href="eventBay.css">
      <script src="jquery-csv.js"></script>
  </head>

  <body>
    <section>
      <div class="left-box">
        <div class="content">
          <h1>Your Events</h1>
        </div>
        <div id="body">

            <ul id="contentL">

            </ul>
      </div>
      </div>

      <div class="events">
        <div class="content">
          <h1>Bay Area Events</h1>

        </div>
        <div class="search">
          <input type="text" id="inputSearch" onkeyup="searchList()" placeholder="Search for names..">
        </div>
        <div class="sort">
          <h3>Sort By:</h3>
          <div class="sortButtons">
            <button type="button" id="date" onclick="sortList(events, 0)">Date</button>
            <button type="button" id="artist" onclick="sortList(events, 1)">Artist</button>
            <button type="button" id="genre" onclick="sortList(events, 2)">Genre</button>
            <button type="button" id="venue" onclick="sortList(events, 3)">Venue</button>
          </div>


        </div>
        <div id="body">

            <ul id="contentR">
              <script type="text/javascript">
                createList(events);
              </script>
            </ul>


      </div>
    </div>
    </section>
  </body>
</html>
